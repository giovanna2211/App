<!doctype html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Nunito:ital,wght@0,200..1000;1,200..1000&family=Overpass:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
  <title>Cash Coinc</title>
  <style>
    :root {
      --cor-bege: #F5F0E1;
      --cor-rosa: #EC5C8F;
      --cor-rosa-hover: #D34C74;
      --cor-marinho: #1A2E45;
      --cor-azul-meta: #1CB0F6;
      --cor-verde: #1CF640;
      --cor-vermelho: #DA2C2C;
      --cor-cinza-borda: #A19999;
      --cor-linha: #D9D9D9;
      --track-bg: #e9e7e7; /* trilho claro */
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      font-family: "Nunito", sans-serif;
      background: var(--cor-bege);
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .container {
      width: 100%;
      max-width: 375px;
      background: var(--cor-bege);
      border: 1px solid #e5e5e5;
      box-sizing: border-box;
    }

    .header { text-align: center; padding: 18px 0; }
    .header img { width: 154px; height: auto; display:block; margin:0 auto; }

    .meta { background: var(--cor-bege); padding: 18px 20px 8px 20px; }
    .meta h3 { color: var(--cor-marinho); font-size: 20px; font-weight: 700; margin-bottom: 8px; }
    .meta-tag { display: inline-block; font-size: 12px; color: var(--cor-cinza-borda); border: 1px solid var(--cor-cinza-borda); border-radius: 30px; padding: 4px 10px; margin-bottom: 8px; }

    .progresso-container {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-top: 6px;
      position: relative;
    }

    .barra-progresso {
      position: relative;
      flex: 1;
      height: 14px;
      background: var(--track-bg);
      border-radius: 12px;
      overflow: visible;
    }

    .progresso {
      height: 100%;
      width: 87%;
      background: linear-gradient(90deg, var(--cor-rosa) 0%, var(--cor-rosa) 100%);
      border-radius: 12px;
      position: relative;
    }

    .marcador {
      position: absolute;
      right: 0;
      top: 50%;
      transform: translate(50%, -50%);
      width: 20px;
      height: 20px;
      border-radius: 50%;
      background: #fff;
      border: 3px solid var(--cor-rosa);
      box-shadow: 0 1px 2px rgba(0,0,0,0.08);
      z-index: 3;
    }

    .presente-img {
      width: 40px;
      height: auto;
      margin-left: -18px;
      z-index: 5;
      display: block;
      align-self: center;
    }

    .porcentagem { font-size: 12px; font-weight: 400; color: var(--cor-cinza-borda); margin-top: 8px; }
    .porcentagem span { color: #000; font-weight: 400; font-size: 12px; }

    .historico { padding: 16px 20px; }
    .historico h3 { color: var(--cor-marinho); font-size: 20px; font-weight: 700; margin-bottom: 12px; }

    .legenda { display: flex; flex-direction: column; gap: 4px; margin-bottom: 10px; }
    .legenda-item { display: inline-flex; align-items: center; font-size: 16px; gap: 4px; white-space: nowrap; }
    .bolinha { width: 12px; height: 12px; border-radius: 50%; flex-shrink: 0; margin-right: 6px; }
    .azul { background: var(--cor-azul-meta); }
    .verde { background: var(--cor-verde); }
    .vermelha { background: var(--cor-vermelho); }
    .legenda-text { color: #222; display: inline-block; }
    .meta-label { color: var(--cor-azul-meta); font-weight: 600; font-size: 14px; margin-left: 2px; }

    .historico-box { background: #fff; padding: 8px; text-align: right; font-weight: 400; font-size: 16px; line-height: 1.6; margin-top: 8px; }
    .valor-vermelho { color: var(--cor-vermelho); }
    .valor-verde { color: var(--cor-verde); }
    .valor-azul { color: var(--cor-azul-meta); }

    .mensagem { padding: 16px 20px 28px 20px; text-align: center; }
    .mensagem h3 { color: var(--cor-marinho); font-size: 20px; font-weight: 700; text-align: left; margin-bottom: 10px; }

    .mensagem-container { display: flex; align-items: center; justify-content: center; gap: 8px; }
    .seta {
      background: none;
      border: none;
      color: var(--cor-marinho);
      font-size: 20px;
      width: 28px;
      height: 28px;
      font-weight: bold;
      cursor: pointer;
      transition: transform 0.15s;
      display: inline-flex;
      align-items: center;
      justify-content: center;
    }
    .seta:hover { transform: scale(1.08); color: var(--cor-rosa); }

    .caixa-mensagem {
      width: 278px;
      height: 55px;
      border: 2px solid var(--cor-rosa);
      border-radius: 2px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 16px;
      font-weight: 400;
      color: #000;
      transition: opacity 160ms ease, transform 160ms ease;
      opacity: 1;
    }

    /* efeito fade para troca de texto */
    .fade-out {
      opacity: 0;
      transform: translateY(-4px);
    }

    .mensagem-btn { margin-top: 16px; background: var(--cor-rosa); color: #fff; font-weight: 700; border: none; border-radius: 30px; width: 152px; height: 39px; padding: 8px 32px; font-size: 14px; cursor: pointer; transition: background 0.3s; }
    .mensagem-btn:hover { background: var(--cor-rosa-hover); }
    hr { width: 100%; border: none; border-top: 5px solid var(--cor-linha); margin: 0; }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <img src="./img/logo.png" alt="cash coinc">
    </div>
    <hr>

    <div class="meta">
      <h3>Meta</h3>
      <div class="meta-tag">Vídeo Game Xbox</div>

      <!-- barra com marcador -->
      <div class="progresso-container" aria-hidden="true">
        <div class="barra-progresso" role="progressbar" aria-valuenow="87" aria-valuemin="0" aria-valuemax="100">
          <div class="progresso">
            <div class="marcador" aria-hidden="true"></div>
          </div>
        </div>

        <img src="./img/presente.png" alt="Presente" class="presente-img">
      </div>

      <div class="porcentagem">Porcentagem da meta: <span>87%</span></div>
    </div>
    <hr>

    <div class="historico">
      <h3>Histórico</h3>
      <div class="legenda">
        <div class="legenda-item">
          <span class="bolinha azul"></span>
          <span class="legenda-text">Economizar para</span>
          <span class="meta-label">meta</span>
        </div>
        <div class="legenda-item">
          <span class="bolinha verde"></span>
          <span class="legenda-text">Economizar</span>
        </div>
        <div class="legenda-item">
          <span class="bolinha vermelha"></span>
          <span class="legenda-text">Retirar</span>
        </div>
      </div>

      <div class="historico-box">
        <div class="valor-vermelho">-4,00</div>
        <div class="valor-verde">20,00</div>
        <div class="valor-vermelho">-2,00</div>
        <div class="valor-azul">90,00</div>
      </div>
    </div>
    <hr>

    <div class="mensagem">
      <h3>Mensagem</h3>

      <div class="mensagem-container" role="region" aria-label="Mensagens rápidas">
        <button class="seta seta-esquerda" aria-label="Mensagem anterior">‹</button>

        <!-- caixa de mensagem cujo texto será alterado -->
        <div class="caixa-mensagem" id="mensagemBox" aria-live="polite">Parabéns pelo progresso filho!</div>

        <button class="seta seta-direita" aria-label="Próxima mensagem">›</button>
      </div>

      <button class="mensagem-btn" id="enviarBtn">ENVIAR</button>
    </div>
    <hr>
  </div>

  <script>
    (function () {
      const box = document.getElementById('mensagemBox');
      const leftBtn = document.querySelector('.seta-esquerda');
      const rightBtn = document.querySelector('.seta-direita');

      // Mensagens em um array (agora com 4 opções, incluindo a frase do pai)
      const MESSAGES = [
        'Parabéns pelo progresso filho!',
        'Parabéns pelo progresso filha!',
        'Mamãe está orgulhosa de você!',
        'Papai está orgulhoso de você!'
      ];

      let idx = 0; // índice atual

      // atualiza texto com fade
      function showIndex(i) {
        const newText = MESSAGES[i];
        if (box.textContent.trim() === newText) return;
        box.classList.add('fade-out');
        setTimeout(() => {
          box.textContent = newText;
          box.classList.remove('fade-out');
        }, 160);
      }

      function next() {
        idx = (idx + 1) % MESSAGES.length;
        showIndex(idx);
      }

      function prev() {
        idx = (idx - 1 + MESSAGES.length) % MESSAGES.length;
        showIndex(idx);
      }

      rightBtn.addEventListener('click', (e) => { e.preventDefault(); next(); });
      leftBtn.addEventListener('click', (e) => { e.preventDefault(); prev(); });

      // navegação por teclado (setas)
      document.addEventListener('keydown', (ev) => {
        if (ev.key === 'ArrowRight') next();
        else if (ev.key === 'ArrowLeft') prev();
      });

      // opcional: enviar mostra no console (pode trocar por ação real)
      document.getElementById('enviarBtn').addEventListener('click', () => {
        alert('Enviado para a criança!');
        console.log('Mensagem enviada:', box.textContent.trim());
        // aqui você pode adicionar lógica real (fetch, modal, etc.)
      });
    })();
  </script>

  <!-- ADIÇÃO: script mínimo para ler a meta criada pela criança (localStorage) -->
  <script>
    (function(){
      try {
        var parentMetaEl = document.querySelector('.meta .meta-tag');
        if (!parentMetaEl) return;
        if (!parentMetaEl.id) parentMetaEl.id = 'parentMetaTag';
        function updateParentMetaFromStorage() {
          var raw = localStorage.getItem('cashcoinc_meta');
          if (raw) {
            try {
              var obj = JSON.parse(raw);
              document.getElementById('parentMetaTag').textContent = obj.name + (obj.value ? ' — R$ ' + obj.value : '');
            } catch (e) {
              console.warn('Erro ao ler cashcoinc_meta', e);
            }
          }
        }
        // atualiza ao carregar
        updateParentMetaFromStorage();
        // escuta mudanças vindas de outras abas/janelas
        window.addEventListener('storage', function(e){
          if (e.key === 'cashcoinc_meta') {
            updateParentMetaFromStorage();
          }
        });
      } catch (err) {
        console.warn(err);
      }
    })();
  </script>
</body>
</html>
